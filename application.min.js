App.onLaunch=function(a){var b;return b=new Downloader(localStorage.getItem("putioAccessToken")),b.downloadList(null,function(a){var b;return b=createAlert("Put.IO Data",a.map(function(a){return a.fileType})),navigationDocument.pushDocument(b)})},App.onWillResignActive=function(){},App.onDidEnterBackground=function(){},App.onWillEnterForeground=function(){},App.onDidBecomeActive=function(){},App.onWillTerminate=function(){};var Downloader;Downloader=function(){function a(a){this.accessToken=a}return a.prototype.baseURL="https://api.put.io/v2",a.prototype.urlFor=function(a){var b;return b=a.indexOf("?")>-1?"&":"?",this.baseURL+a+b+"oauth_token="+this.accessToken},a.prototype.urlForList=function(a){var b;return b="/files/list",a&&(b+="?parent_id="+a),this.urlFor(b)},a.prototype.urlForMovie=function(a){return this.urlFor("/files/"+a+"/hls/media.m3u8?subtitle_key=all")},a.prototype.download=function(a,b){var c;return c=new XMLHttpRequest,c.open("GET",a),c.responseType="json",c.onload=function(){var a;return a=JSON.parse(this.responseText).files.map(function(a){return new File(a)}),console.log(a.filter(function(a){return a.isUsable()})),b(a.filter(function(a){return a.isUsable()}))},c.onerror=function(){return console.log(c)},c.send()},a.prototype.downloadList=function(a,b){return this.download(this.urlForList(a),b)},a}();var File;File=function(){function a(a){this.id=a.id,this.name=a.name,this.icon=a.icon,this.screenshot=a.screenshot,this.startFrom=a.start_from,this.isPlayable=a.is_mp4_available||"video/mp4"===a.content_type,this.fileType=function(){switch(a.file_type){case 0:return"directory";case 3:return"movie";default:return"other"}}()}return a.prototype.isUsable=function(){return"other"!==this.fileType},a}();var createAlert,escapeHTML;createAlert=function(a,b){var c,d;return c="<?xml version='1.0' encoding='UTF-8' ?>\n<document>\n  <alertTemplate>\n    <title>"+escapeHTML(a)+"</title>\n    <description>"+escapeHTML(b)+"</description>\n  </alertTemplate>\n</document>",d=new DOMParser,d.parseFromString(c,"application/xml")},escapeHTML=function(a){return String(a).replace(/[\"&<>]/g,function(a){return{'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"}[a]})};